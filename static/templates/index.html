<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.84.0">
  <title>Overcooked experiment</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/starter-template/">



  <!-- Bootstrap core CSS -->
  <link href="static/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- Favicons -->
  <link rel="apple-touch-icon" href="/docs/5.0/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" href="/docs/5.0/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="/docs/5.0/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
  <link rel="manifest" href="/docs/5.0/assets/img/favicons/manifest.json">
  <link rel="mask-icon" href="/docs/5.0/assets/img/favicons/safari-pinned-tab.svg" color="#7952b3">
  <link rel="icon" href="/docs/5.0/assets/img/favicons/favicon.ico">
  <meta name="theme-color" content="#7952b3">


  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>


  <!-- Custom styles for this template -->
  <link href="static/css/starter-template.css" rel="stylesheet">
</head>

<body>

  <div class="col-lg-8 mx-auto p-3 py-md-5">
    <header class="d-flex align-items-center pb-3 mb-5 border-bottom">
      <div class="container">
        <div class="row">
          <div class="col-md">
            <img src="static/images/logo_airudit.png"
              class="custom-logo" alt="Laboratoire Parole et Langage" height="90">
          </div>
          <div class="col-md">
            <span class="fs-2">Overcooked Study</span>
          </div>
          <div class="col-md">
            <img src="static/images/ONERA.png" class="custom-logo"
              alt="ONERA, the French Aerospace Lab", height=90>
          </div>
        </div>
      </div>
    </header>

    <main>
      <h1 class="text-center mb-4">Welcome to Overcooked Human-AI Cooperation Study</h1>
      <hr class="col-3 col-md-2 mb-5 mx-auto">
      
      <!-- Important Instructions Section -->
      <div class="alert alert-info mb-4" role="alert">
        <h4 class="alert-heading"><i class="fas fa-info-circle"></i> Important Instructions</h4>
        <p><strong>Please read carefully before proceeding:</strong></p>
        <ul class="mb-0">
          <li><strong>Browser Navigation:</strong> Do not use your browser's back/forward buttons or reload the page unless you encounter a bug or problem, as this may invalidate your participation in the experiment.</li>
          <li><strong>Timers:</strong> Be aware that there are timers on all pages of the experiment. Please respond within the allocated time, which is sufficient for you to understand and respond to what is being asked.</li>
          <li><strong>Audio Equipment:</strong> Please ensure you are using functional audio equipment (headphones or speakers) as this is required for the experiment.</li>
        </ul>
      </div>
      
      <!-- Audio Equipment Verification Section -->
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0"><i class="fas fa-volume-up"></i> Audio Equipment Verification</h5>
        </div>
        <div class="card-body">
          <p class="card-text mb-3">Before starting the experiment, please verify that your audio equipment is working properly by completing this audio verification test.</p>
          
          <div class="row align-items-end">
            <div class="col-md-4 mb-3">
              <button type="button" id="playAudioBtn" class="btn btn-outline-primary">
                <i class="fas fa-play"></i> Play Audio Test
              </button>
              <audio id="captchaAudio" preload="auto">
                <source src="static/audio/captcha_audio.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>
            </div>
            <div class="col-md-4 mb-3">
              <label for="captchaInput" class="form-label fw-bold">Enter the number you heard:</label>
              <input type="number" id="captchaInput" class="form-control" placeholder="Enter number" max="999" min="0">
            </div>
            <div class="col-md-4 mb-3">
              <div id="captchaFeedback" class="form-text"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Start Experiment Section -->
      <div class="text-center">
        <form method="post" action="instructions">
          <!-- Hidden consent field - automatically set to accept when captcha is validated -->
          <input type="hidden" id="consentRadio" name="consentRadio" value="accept">
          <button type="submit" id="submitBtn" class="btn btn-success btn-lg" disabled>
            <i class="fas fa-arrow-right"></i> Start Experiment
          </button>
          <p class="text-muted mt-2 small">Complete the audio verification above to proceed</p>
        </form>
      </div>
    </main>
    <footer class="pt-5 my-5 text-muted border-top">
    </footer>
  </div>

  <script src="static/js/bootstrap.bundle.min.js"></script>

  <!-- Audio Captcha JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Get DOM elements
      const playAudioBtn = document.getElementById('playAudioBtn');
      const captchaAudio = document.getElementById('captchaAudio');
      const captchaInput = document.getElementById('captchaInput');
      const captchaFeedback = document.getElementById('captchaFeedback');
      const submitBtn = document.getElementById('submitBtn');
      
      // Correct answer for the captcha
      const correctAnswer = 55;
      
      // Track if captcha is validated
      let captchaValidated = false;
      
      // Function to update submit button state
      function updateSubmitButton() {
        if (captchaValidated) {
          submitBtn.disabled = false;
          submitBtn.innerHTML = '<i class="fas fa-arrow-right"></i> Start Experiment';
          submitBtn.className = 'btn btn-success btn-lg';
          document.querySelector('.text-muted').textContent = 'Audio verification complete! You may now start the experiment.';
          document.querySelector('.text-muted').className = 'text-success mt-2 small';
        } else {
          submitBtn.disabled = true;
          submitBtn.innerHTML = '<i class="fas fa-lock"></i> Complete Audio Verification';
          submitBtn.className = 'btn btn-secondary btn-lg';
          document.querySelector('.text-muted').textContent = 'Complete the audio verification above to proceed';
          document.querySelector('.text-muted').className = 'text-muted mt-2 small';
        }
      }
      
      // Function to validate captcha input
      function validateCaptcha() {
        const userInput = parseInt(captchaInput.value);
        
        if (isNaN(userInput)) {
          captchaFeedback.textContent = 'Please enter a valid number.';
          captchaFeedback.className = 'form-text text-warning';
          captchaValidated = false;
        } else if (userInput === correctAnswer) {
          captchaFeedback.textContent = '✓ Audio verification successful!';
          captchaFeedback.className = 'form-text text-success';
          captchaValidated = true;
        } else {
          captchaFeedback.textContent = '✗ Incorrect. Please listen to the audio again and try again.';
          captchaFeedback.className = 'form-text text-danger';
          captchaValidated = false;
        }
        
        updateSubmitButton();
      }
      
      // Play audio button event listener
      playAudioBtn.addEventListener('click', function() {
        playAudioBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Playing...';
        playAudioBtn.disabled = true;
        
        captchaAudio.currentTime = 0; // Reset to beginning
        captchaAudio.play().catch(function(error) {
          console.error('Error playing audio:', error);
          captchaFeedback.textContent = 'Error playing audio. Please check your audio settings.';
          captchaFeedback.className = 'form-text text-danger';
          playAudioBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Error';
          playAudioBtn.className = 'btn btn-outline-danger';
        });
      });
      
      // Reset button when audio ends
      captchaAudio.addEventListener('ended', function() {
        playAudioBtn.innerHTML = '<i class="fas fa-play"></i> Play Audio Test';
        playAudioBtn.disabled = false;
        playAudioBtn.className = 'btn btn-outline-primary';
      });
      
      // Input validation - only allow numbers
      captchaInput.addEventListener('input', function(e) {
        // Remove any non-numeric characters
        this.value = this.value.replace(/[^0-9]/g, '');
        
        // Validate captcha when user types
        if (this.value.length > 0) {
          validateCaptcha();
        } else {
          captchaFeedback.textContent = '';
          captchaValidated = false;
          updateSubmitButton();
        }
      });
      
      // Prevent form submission if captcha not validated
      document.querySelector('form').addEventListener('submit', function(e) {
        if (!captchaValidated) {
          e.preventDefault();
          captchaFeedback.textContent = 'Please complete the audio verification first.';
          captchaFeedback.className = 'form-text text-danger';
        }
      });
      
      // Initialize button state
      updateSubmitButton();
    });
  </script>

</body>

</html>
